---
type: Always Apply
description: Main project context and guidelines for Optimarr - Media Optimization Platform
alwaysApply: true
---

# Optimarr - Cursor Rules
## Media Optimization Platform

This file provides context and guidelines for AI assistants working on the Optimarr project.

---

## Project Overview

Optimarr is a web-based media optimization platform that analyzes video files to determine their compatibility with media server clients (primarily Jellyfin). It integrates with Sonarr, Radarr, and Jellyfin to provide comprehensive media library management and optimization recommendations.

**Tech Stack:**
- Backend: ASP.NET Core 8.0, C#
- Database: SQLite with Entity Framework Core
- Frontend: Vanilla JavaScript (ES6 modules), HTML5, CSS3
- Logging: Serilog
- Containerization: Docker

**Current Version:** See `VERSION` file (currently 1.1.2)

---

## Documentation Structure

All documentation follows the **B-MAD (Breakthrough Method for Agentic Development)** methodology:

- **`docs/PRD.md`** - Product Requirement Document with all features and requirements
- **`docs/ARCHITECTURE.md`** - System architecture, components, and design patterns
- **`docs/DEVELOPER_GUIDE.md`** - Development workflows, code patterns, and common tasks
- **`docs/CHANGELOG.md`** - Version history and changelog
- **`docs/STORY_TRACKING.md`** - Detailed story tracking with change documentation
- **`README.md`** - User-facing documentation

**ALWAYS** update relevant documentation when making changes.

---

## Quick Reference

**Version File:** `VERSION`  
**Changelog:** `docs/CHANGELOG.md`  
**Story Tracking:** `docs/STORY_TRACKING.md`  
**Migrations:** `Data/Migrations/`  
**API Base:** `/api/`  
**Version Endpoint:** `/api/system/version`  
**Migration Status:** `/api/system/migration`

---

## Important Reminders

### Always Do:
- ✅ Check database impact before making changes
- ✅ Create migration scripts for schema changes
- ✅ Update VERSION file when making changes
- ✅ Document changes in CHANGELOG.md and STORY_TRACKING.md
- ✅ Update relevant documentation files
- ✅ Add logging for important operations
- ✅ Handle errors gracefully
- ✅ Test changes before committing

### Never Do:
- ❌ Modify database schema without migration script
- ❌ Make breaking changes without version bump
- ❌ Skip documentation updates
- ❌ Commit untested code
- ❌ Remove logging without replacement
- ❌ Hardcode configuration values

---

## When in Doubt

1. Check the documentation first (`docs/` folder)
   - `docs/ARCHITECTURE.md` for system design
   - `docs/DEVELOPER_GUIDE.md` for workflows
   - `docs/PRD.md` for requirements
2. Look at existing code for patterns
   - Similar services in `Services/` directory
   - Similar controllers in `Controllers/` directory
   - Similar JavaScript modules in `wwwroot/js/`
3. Follow the established conventions (see code-patterns rule)
4. Ask for clarification if needed
5. Document your decisions in relevant documentation files

---

**Remember:** Every change should be tracked, documented, and versioned. This ensures maintainability and helps future developers (and AI assistants) understand the project evolution.
